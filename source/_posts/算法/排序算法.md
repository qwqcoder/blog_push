---
layout: post
title: æ’åºç®—æ³•
tag:
  - algorithm
  - merge sort
categories: ç®—æ³•å­¦ä¹ 
abbrlink: '735e5788'
---

# å½’å¹¶æ’åº

```c++
#include <bits/stdc++.h>
using namespace std;
const int N = 1e5 + 10;
int a[N], tmp[N], n;

int merge(int* a, int l, int r) {
    if (l >= r) return 0;
    int mid = (l + r) >> 1;
    int cnt = 0;
    cnt += merge(a, l, mid);
    cnt += cnt + merge(a, mid + 1, r);


    int i = l, j = mid + 1, k = 0;
    while (i <= mid && j <= r) {
        if (a[i] <= a[j]) tmp[k++] = a[i ++];
        else {
            cnt += mid - i + 1;
            tmp[k++] = a[j ++];
        }
    }
    while (i <= mid) tmp[k++] = a[i ++];
    while (j <= r) tmp[k++] = a[j ++];
    for (int i = 0; i < k; i++)
        a[l + i] = tmp[i];

    return cnt;
}
signed main() {
    cin >> n;
    for (int i = 1; i <= n; i++)
        cin >> a[i];

    int ans = merge(a, 1, n);
    cout << ans << endl;
    return 0;
}
```

+ ç»“è®ºï¼šé€†åºå¯¹çš„æ•°é‡ $=$ ä½¿å¾—æ•°ç»„å‡åºæ—¶ç›¸é‚»æ•°ç»„å…ƒç´ çš„æœ€å°äº¤æ¢æ¬¡æ•°, 

**è¯æ˜ï¼š**

> äº¤æ¢æ•°ç»„ä¸¤ä¸ªç›¸é‚»çš„å…ƒç´  `a[i]`, `a[i + 1]`, è‹¥äºŒè€…ä¸ç›¸ç­‰, é‚£ä¹ˆå¯¹æ•°ç»„çš„é€†åºå¯¹æ•°é‡çš„å½±å“ä¸º 1, `a[i] > a[i + 1]` æ—¶é€†åºå¯¹æ•°ç›®å‡ä¸€, åˆå› ä¸ºå‡åºæ•°ç»„çš„é€†åºå¯¹æ•°ç›®ä¸º 0, å¯çŸ¥è‡³å°‘äº¤æ¢ k æ¬¡ç›¸é‚»å…ƒç´ å¯ä½¿å¾—æ•°ç»„å˜æˆå‡åº
>
> åˆå› ä¸ºæ•°ç»„ä¸ä¸ºå‡åºæ—¶, å¿…å®šå­˜åœ¨ `a[i] > a[i + 1]`, å¦åˆ™æ•°ç»„å°±æ˜¯å‡åºäº†ğŸ¤ª
>
> æ˜¾ç„¶, æ¯æ¬¡äº¤æ¢éƒ½å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªä½ç½®å­˜åœ¨ `a[i] > a[i + 1]`, ä»è€Œé€†åºå¯¹æ•°ç›®å‡ä¸€, æ‰€ä»¥ç»“è®ºæˆç«‹

## æ ‘çŠ¶æ•°ç»„æ±‚é€†åºå¯¹

```c++

```

